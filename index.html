<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fly Express â€” Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

<style>
  :root{
    --bg1:#061a24;--bg2:#0b2836;--neon:#1df2c2;--text:#e8f1f5;--muted:#b7c3cc;
    --ring:#1df2c28c; --accent:#2bd4ff; --btn:#1f9d55;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;font-family:"Cairo",system-ui,sans-serif;color:var(--text);
    background:
      radial-gradient(1200px 700px at 10% 10%, #0a2030 0%, transparent 60%),
      radial-gradient(1200px 700px at 90% 90%, #051621 0%, transparent 60%),
      conic-gradient(from 0deg at 50% 50%, #071420, #0c2434, #0a2d44, #0c2434, #071420);
    background-size:140% 140%,140% 140%, 200% 200%;
    animation:bgShift 22s ease-in-out infinite;
    padding:20px;
  }
  @keyframes bgShift{
    0%,100%{background-position:10% 10%, 90% 90%, 0% 50%}
    50%{background-position:25% 20%, 75% 80%, 100% 50%}
  }

  .wrap{max-width:720px;margin:0 auto}
  header{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:12px}
  header h1{margin:0;font-size:28px;font-weight:800}
  header .sub{width:100%;color:var(--muted);margin-top:6px;font-weight:600}

  /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠØ© */
  .card{
    background:rgba(255,255,255,.04);
    border:1px solid rgba(255,255,255,.06);
    border-radius:18px;
    backdrop-filter:blur(8px);
    padding:18px;
    box-shadow:0 20px 50px rgba(0,0,0,.35);
  }

  /* Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ */
  .wheel-box{display:grid;place-items:center;gap:14px;margin-top:10px}
  .wheel{
    width:min(88vw,480px);aspect-ratio:1/1;border-radius:50%;
    display:grid;place-items:center;position:relative;
    background:
      radial-gradient(circle at 50% 50%, #000 0 71.5%, transparent 71.6%),
      conic-gradient(
        #0fbbe8 0 72deg,   /* 0 */
        #f5b041 72deg 144deg,/* 1 */
        #8bd8ff 144deg 216deg,/* 2 */
        #ff5a7c 216deg 288deg,/* Ø­Ø¸ Ø£ÙˆÙØ± */
        #27ae60 288deg 360deg /* 3 */
      );
    border:10px solid #111; /* Ø¥Ø·Ø§Ø± Ø£Ø³ÙˆØ¯ Ø¯Ø§Ø®Ù„ÙŠ */
    box-shadow:0 0 0 10px var(--neon), 0 0 30px var(--ring);
    transition:transform 6s cubic-bezier(.15,.8,.05,1);
    will-change:transform;
  }
  /* Ø§Ù„Ø³Ù‡Ù… Ù„ØªØ­Øª (Ù‡Ùˆ Ø§Ù„Ù…Ø±Ø¬Ø¹ Ù„Ù„ÙÙˆØ²) */
  .pointer{
    position:relative;width:0;height:0;margin-top:8px;
    border-left:16px solid transparent;border-right:16px solid transparent;border-top:28px solid #ff477e;
    filter:drop-shadow(0 8px 12px rgba(0,0,0,.45));
  }

  .btns{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:10px}
  button{
    border:0;border-radius:999px;padding:12px 22px;font-weight:800;color:#022;cursor:pointer;
    background:linear-gradient(135deg,#22e6a7,#24b6ff); color:#012; box-shadow:0 10px 22px rgba(0,0,0,.35);
  }
  button:disabled{opacity:.6;cursor:not-allowed}
  .hint{color:var(--muted);text-align:center;margin-top:6px}
  .result{
    text-align:center;margin:18px auto 6px;font-size:22px;font-weight:800;color:#00ffc3;
    text-shadow:0 6px 20px rgba(0,0,0,.35);
  }
  .status{
    text-align:center;margin:6px auto 0;color:#cfe7f2;font-weight:700
  }

  .badge{display:inline-flex;align-items:center;gap:8px;border-radius:12px;padding:8px 12px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}

  .call{
    position:fixed;right:18px;top:18px;background:#ff6bd6;color:#101;padding:12px;border-radius:999px;
    display:flex;align-items:center;gap:10px;font-weight:800;box-shadow:0 12px 26px rgba(0,0,0,.35);
    text-decoration:none;
  }
  .call i{font-style:normal}
</style>
</head>
<body>
  <a class="call" href="tel:+201017908076" title="Ø§ØªØµÙ„ Ø¨Ù†Ø§">
    <i>ğŸ“</i> ØªÙˆØ§ØµÙ„
  </a>

  <div class="wrap">
    <header>
      <h1>ğŸ¡ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ â€” <span style="color:#39f5c7">Fly Express</span></h1>
      <div class="sub">Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© ÙˆØ§ÙƒØ³Ø¨ Ø¬ÙˆØ§Ø¦Ø²ÙƒØ› <b>Ø§Ù„Ø³Ù‡Ù… Ù„ØªØ­Øª</b> Ù‡Ùˆ Ø§Ù„Ù…Ø±Ø¬Ø¹ Ù„Ù„ÙÙˆØ². Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª ØªØªØ¬Ø¯Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ ÙƒÙ„ <b>Ø®Ù…ÙŠØ³</b>.</div>
    </header>

    <div class="card">
      <div class="wheel-box">
        <div id="wheel" class="wheel" aria-label="Wheel of fortune"></div>
        <div class="pointer" aria-hidden="true"></div>
      </div>

      <div class="btns">
        <button id="spinBtn">ğŸ¯ Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø©</button>
        <button id="howBtn" style="background:linear-gradient(135deg,#d4ecff,#a9e9c9);">â“ Ø¥Ø²Ø§ÙŠ Ø£ÙƒØ³Ø¨ØŸ</button>
      </div>

      <div id="result" class="result"></div>
      <div class="status">
        <span class="badge">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: <b id="triesLeft">0</b></span>
      </div>
      <p class="hint">ğŸ’¡ ØªÙ„Ù…ÙŠØ­: Ø§Ù„Ù†ØªÙŠØ¬Ø© ØªØ¸Ù‡Ø± Ø¨Ø¹Ø¯ Ù…Ø§ Ø§Ù„Ø¹Ø¬Ù„Ø© ØªÙˆÙ‚Ù ØªÙ…Ø§Ù…Ù‹Ø§.</p>
    </div>
  </div>

<script>
/* ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© ===== */
const segments = ['0','1','2','Ø­Ø¸ Ø£ÙˆÙØ±','3'];               // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª Ù…Ø¹ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù€ conic-gradient
const ATTEMPTS_PER_WEEK = 10;                               // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù„ÙƒÙ„ Ø£Ø³Ø¨ÙˆØ¹ (ÙƒÙ„ Ø®Ù…ÙŠØ³ ØªØªØµÙØ±)
const PICK_DEG = 270;                                       // Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø³Ù‡Ù… Ù„ØªØ­Øª = 270Â°
const wheel = document.getElementById('wheel');
const spinBtn = document.getElementById('spinBtn');
const howBtn = document.getElementById('howBtn');
const resultEl = document.getElementById('result');
const triesLeftEl = document.getElementById('triesLeft');

let currentRotation = 0;

/* ===== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª (ØªØªØ¬Ø¯Ø¯ ÙƒÙ„ Ø®Ù…ÙŠØ³) ===== */
function getWeekKey(d=new Date()){
  // ISO week key (yyyy-Www)
  const date = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
  const dayNum = (date.getUTCDay()+6)%7;
  date.setUTCDate(date.getUTCDate()-dayNum+3);
  const firstThursday = new Date(Date.UTC(date.getUTCFullYear(),0,4));
  const week = 1 + Math.round(((date-firstThursday)/86400000 - 3 + (firstThursday.getUTCDay()+6)%7)/7);
  return `${date.getUTCFullYear()}-W${String(week).padStart(2,'0')}`;
}

function isThursday(d=new Date()){
  // Ø§Ù„Ø®Ù…ÙŠØ³ = 4 (Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø£Ø­Ø¯ = 0)
  return d.getDay() === 4;
}

function loadTries(){
  const key = 'wheel_tries_' + getWeekKey();
  let left = Number(localStorage.getItem(key));
  if (!Number.isInteger(left)) left = ATTEMPTS_PER_WEEK;
  // Ø¥Ù† ÙƒØ§Ù† Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø®Ù…ÙŠØ³ ÙˆÙ„Ù… ÙŠØªÙ… ÙØªØ­ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø¨Ø¹Ø¯ØŒ Ø£Ø¹ÙØ¯ Ø§Ù„ØªØ¹ÙŠÙŠÙ†
  const openedKey = 'wheel_opened_' + getWeekKey();
  const opened = localStorage.getItem(openedKey) === '1';
  if (isThursday() && !opened){
    left = ATTEMPTS_PER_WEEK;
    localStorage.setItem(openedKey,'1');
    localStorage.setItem(key, String(left));
  } else {
    localStorage.setItem(key, String(left));
  }
  return left;
}

function saveTries(left){
  const key = 'wheel_tries_' + getWeekKey();
  localStorage.setItem(key, String(left));
}

function syncUI(){
  const left = loadTries();
  triesLeftEl.textContent = left;
  spinBtn.disabled = left <= 0;
}

/* ===== Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ø¹Ø¬Ù„Ø© ===== */
function spin(){
  let left = loadTries();
  if (left <= 0) {
    resultEl.textContent = 'Ø®Ù„ØµØª Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ. Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø®Ù…ÙŠØ³ Ø§Ù„Ø¬Ø§ÙŠ âœ¨';
    return;
  }

  spinBtn.disabled = true;
  resultEl.textContent = '';

  // Ø²Ø§ÙˆÙŠØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© + Ø¯ÙˆØ±Ø§Øª ÙƒØ§Ù…Ù„Ø© (5 Ø¥Ù„Ù‰ 8 Ø¯ÙˆØ±Ø§Øª)
  const extraSpins = 5 + Math.floor(Math.random()*4); // 5..8
  const randomAngle = Math.random()*360;
  const targetRotation = currentRotation + extraSpins*360 + randomAngle;

  // Ø­Ø±Ù‘Ùƒ Ø§Ù„Ø¹Ø¬Ù„Ø©
  currentRotation = targetRotation;
  wheel.style.transform = `rotate(${currentRotation}deg)`;

  const segSize = 360/segments.length;

  // Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† (6s ÙÙŠ CSS)
  setTimeout(()=>{
    const rot = currentRotation % 360;
    const selected = (PICK_DEG - rot + 360) % 360;

    // Ø£Ù‡Ù… ØªØ¹Ø¯ÙŠÙ„: Ù†Ø³ØªØ®Ø¯Ù… round Ø¨Ø¯Ù„ floor + ØªØµØ­ÙŠØ­ Ø¨Ø§Ù„Ù…ÙˆØ¯
    const index = Math.round(selected / segSize) % segments.length;
    const outcome = segments[index];

    let msg = '';
    if (outcome === 'Ø­Ø¸ Ø£ÙˆÙØ±'){
      msg = 'Ø­Ø¸ Ø£ÙˆÙØ±! Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ ğŸ€';
    } else {
      const n = Number(outcome);
      msg = `ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! ÙƒØ³Ø¨Øª ${n} ØªÙˆØµÙŠÙ„Ø© Ù…Ø¬Ø§Ù†ÙŠØ©`;
    }
    resultEl.textContent = msg;

    // Ø®ØµÙ… Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    left = Math.max(0, left - 1);
    saveTries(left);
    triesLeftEl.textContent = left;
    spinBtn.disabled = left <= 0 ? true : false;
  }, 6100);
}

/* ===== Ù…Ø³Ø§Ø¹Ø¯Ø© Ù‚ØµÙŠØ±Ø© ===== */
howBtn.addEventListener('click', ()=>{
  alert('â€¢ Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© ÙˆØ§Ø¶Ø¨Ø· Ø¹ÙŠÙ†Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù‡Ù… Ù„ØªØ­Øª â€” Ù‡Ùˆ Ø§Ù„Ù…Ø±Ø¬Ø¹.\nâ€¢ Ù„Ùˆ ÙˆÙ‚Ù Ø¹Ù„Ù‰ 0 Ø£Ùˆ 1 Ø£Ùˆ 2 Ø£Ùˆ 3 ÙŠØ¨Ù‚Ù‰ Ø¯Ù‡ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©.\nâ€¢ Ù„Ùˆ Ø·Ù„Ø¹ "Ø­Ø¸ Ø£ÙˆÙØ±" Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ.\nâ€¢ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¨ØªØªØ¬Ø¯Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ ÙƒÙ„ ÙŠÙˆÙ… Ø®Ù…ÙŠØ³.');
});

spinBtn.addEventListener('click', spin);
syncUI();
</script>
</body>
</html>
